{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/bipin/allPros/layout/Header.jsx\";\nvar __jsx = React.createElement;\nimport { AppBar, Toolbar, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport PropTypes from 'prop-types'; // import { useRouter } from 'next/router';\n\nimport CustomMenu from '../components/menu/CustomMenu';\nimport api from '../lib/api';\nimport { useState, useEffect } from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport { useAuth } from '../context/authContext';\nimport { useRouter } from 'next/router';\nvar drawerWidth = 240;\nvar useStyles = makeStyles({\n  appBar: {\n    width: \"calc(100% - \".concat(drawerWidth, \"px)\"),\n    marginLeft: drawerWidth\n  },\n  accountIcon: {\n    cursor: 'pointer'\n  },\n  pageTitle: {\n    flexGrow: 1\n  },\n  selectRoot: {\n    padding: '0.5em 3em 0.5em 1em'\n  }\n});\n\nfunction Header(props) {\n  var pageName = props.pageName;\n  var classes = useStyles();\n  var router = useRouter();\n\n  var _useState = useState(),\n      businesses = _useState[0],\n      setBusinesses = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      header = _useState2[0],\n      setHeader = _useState2[1];\n\n  function fetchAllBusiness() {\n    return _fetchAllBusiness.apply(this, arguments);\n  }\n\n  function _fetchAllBusiness() {\n    _fetchAllBusiness = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var _ref3, data;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.get('business');\n\n            case 2:\n              _ref3 = _context2.sent;\n              data = _ref3.data;\n              setBusinesses(data);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _fetchAllBusiness.apply(this, arguments);\n  }\n\n  var _useAuth = useAuth(),\n      _useAuth2 = _slicedToArray(_useAuth, 2),\n      businessId = _useAuth2[0].businessId,\n      dispatch = _useAuth2[1];\n\n  useEffect(function () {\n    fetchAllBusiness();\n    setHeader(businessId);\n  }, []);\n\n  var handleChange =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(event) {\n      var _ref2, authorization;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return api.get(\"business/token/\".concat(event.target.value));\n\n            case 3:\n              _ref2 = _context.sent;\n              authorization = _ref2.data.authorization;\n              dispatch({\n                type: 'UPDATE_BUSINESS_TOKEN',\n                payload: authorization\n              });\n              localStorage.setItem('authToken', authorization);\n              dispatch({\n                type: 'UPDATE_BUSINESS_ID',\n                payload: event.target.value\n              });\n              setHeader(event.target.value);\n              router.push(\"/dashboard\");\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n\n    return function handleChange(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(AppBar, {\n    elevation: 0,\n    className: classes.appBar,\n    position: \"fixed\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, __jsx(Toolbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, __jsx(Typography, {\n    className: classes.pageTitle,\n    variant: \"h5\",\n    noWrap: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, pageName), __jsx(Select, {\n    margin: \"dense\",\n    variant: \"filled\",\n    value: header,\n    onChange: handleChange,\n    style: {\n      color: 'white'\n    },\n    classes: {\n      root: classes.selectRoot\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, __jsx(MenuItem, {\n    value: \"Select\",\n    selected: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, __jsx(\"em\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Select Business\")), businesses && businesses.map(function (b) {\n    return __jsx(MenuItem, {\n      key: b.id,\n      value: b.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, b.businessName);\n  })), __jsx(CustomMenu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  })));\n}\n\nHeader.propTypes = {\n  pageName: PropTypes.string\n};\nHeader.defaultProps = {\n  pageName: ''\n};\nexport default Header;","map":{"version":3,"sources":["/home/bipin/allPros/layout/Header.jsx"],"names":["AppBar","Toolbar","Typography","makeStyles","React","PropTypes","CustomMenu","api","useState","useEffect","MenuItem","Select","useAuth","useRouter","drawerWidth","useStyles","appBar","width","marginLeft","accountIcon","cursor","pageTitle","flexGrow","selectRoot","padding","Header","props","pageName","classes","router","businesses","setBusinesses","header","setHeader","fetchAllBusiness","get","data","businessId","dispatch","handleChange","event","target","value","authorization","type","payload","localStorage","setItem","push","console","log","color","root","map","b","id","businessName","propTypes","string","defaultProps"],"mappings":"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","sourcesContent":["import { AppBar, Toolbar, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n// import { useRouter } from 'next/router';\nimport CustomMenu from '../components/menu/CustomMenu';\nimport api from '../lib/api';\nimport { useState, useEffect } from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport { useAuth } from '../context/authContext';\nimport { useRouter } from 'next/router';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles({\n  appBar: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n  },\n  accountIcon: {\n    cursor: 'pointer',\n  },\n  pageTitle: {\n    flexGrow: 1,\n  },\n  selectRoot:{\n    padding:'0.5em 3em 0.5em 1em'\n  }\n});\n\nfunction Header(props) {\n  const { pageName } = props;\n  const classes = useStyles();\n  const router = useRouter();\n  const [businesses, setBusinesses] = useState();\n  const [header, setHeader] = useState(\"\");\n\n  async function fetchAllBusiness() {\n    const { data } = await api.get('business');\n    setBusinesses(data);\n  }\n  const [{businessId}, dispatch] = useAuth();\n\n  useEffect(() => {\n    fetchAllBusiness();\n    setHeader(businessId)\n  }, []);\n  const handleChange = async event => {\n    try {\n      let {\n        data: { authorization },\n      } = await api.get(`business/token/${event.target.value}`);\n      dispatch({ type: 'UPDATE_BUSINESS_TOKEN', payload: authorization });\n      localStorage.setItem('authToken', authorization);\n      dispatch({ type: 'UPDATE_BUSINESS_ID', payload: event.target.value });\n      setHeader(event.target.value);\n      router.push(`/dashboard`);\n    } catch (error) {\n      console.log(error);\n    }\n    // router.push(`/businesses/edit/[id]`, `/businesses/edit/${event.target.value}`);\n  };\n\n  return (\n    <AppBar elevation={0} className={classes.appBar} position=\"fixed\">\n      <Toolbar>\n        <Typography className={classes.pageTitle} variant=\"h5\" noWrap>\n          {pageName}\n        </Typography>\n\n        <Select\n          margin=\"dense\"\n          variant=\"filled\"\n          value={header}\n          onChange={handleChange}\n          style={{ color: 'white' }}\n          classes={{ root: classes.selectRoot }}\n        >\n          <MenuItem value=\"Select\" selected>\n            <em>Select Business</em>\n          </MenuItem>\n          {businesses &&\n            businesses.map(b => (\n              <MenuItem key={b.id} value={b.id}>\n                {b.businessName}\n              </MenuItem>\n            ))}\n        </Select>\n        <CustomMenu/>\n        {/* <CustomMenu accountData={accountData} securityData={securityData} /> */}\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nHeader.propTypes = {\n  pageName: PropTypes.string,\n};\n\nHeader.defaultProps = {\n  pageName: '',\n};\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}